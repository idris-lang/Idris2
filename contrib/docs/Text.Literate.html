<!DOCTYPE html><html lang="en">

<head>
  <meta charset="utf-8">
  <title>Text.Literate</title>
  <link rel="stylesheet" type="text/css" id="preferredStyle" href="../default.css">
  <script>
    /* Updates the stylesheet to use the preferred one.
       Note that we set the link to root ++ sourceLoc because the config
       is shared across the whole website, so the root may differ from
       page to page.
    */
    function setStyleSource (sourceLoc) {
      document.getElementById("preferredStyle").href = "../" + sourceLoc + ".css";
      document.getElementById("selectPreferredStyle").value = sourceLoc;
    }
    /* Initialises the preferred style sheet:
       1. if there is a stored value then use that
          otherwise select the default
       2. set both the css link href & the drop down menu selected option
    */
    function initStyleSource () {
      var preferredStyle = localStorage.getItem("stylefile");
      if (preferredStyle !== null) {
        setStyleSource(preferredStyle);
      } else {
        setStyleSource("default");
      };
    }
    function saveStyleSource (preferredStyle) {
      localStorage.stylefile = preferredStyle;
    }
    </script>
</head>

<body class="namespace">
<header>
  <strong>Idris2Doc</strong> : Text.Literate
  <nav><a href="../index.html">Index</a>

  <select id="selectPreferredStyle">
    <option value="default">Default</option>
<option value="alternative">Alternative</option>
<option value="blackandwhite">Black & White</option>

  </select>
  </nav>

  <script>
  /* We start by initialising the style source */
  initStyleSource();

  /* This listens for changes on the drop down menu and updates the
     css used for the current page when a selection is made.
  */
  document.getElementById("selectPreferredStyle").addEventListener("change", function(){
    var selected = this.options[this.selectedIndex].value; /* the option chosen */
    setStyleSource (selected);
    saveStyleSource (selected);
  });
</script>

</header>
<div class="container"><div id="module-header"><h1>Text.Literate<span style="float:right">(<a href="../source/Text.Literate.html">source</a>)</span></h1><pre>A simple module to process &apos;literate&apos; documents.

The module uses a lexer to split the document into code blocks,
delineated by user-defined markers, and code lines that are
indicated be a line marker. The lexer returns a document stripped
of non-code elements but preserving the original document&apos;s line
count. Column numbering of code lines are not preserved.

The underlying tokeniser is greedy.

Once it identifies a line marker it reads a prettifying space then
consumes until the end of line. Once identifies a starting code
block marker, the lexer will consume input until the next
identifiable end block is encountered. Any other content is
treated as part of the original document.

Thus, the input literate files *must* be well-formed w.r.t
to code line markers and code blocks.

A further restriction is that literate documents cannot contain
the markers within the document&apos;s main text: This will confuse the
lexer.

</pre></div><code></code><h2>Definitions</h2><dl class="decls"><dt id="Text.Literate.Compat.lines"><code><span class="type resolved" title="Text.Literate.Compat.lines"><span class="name function">lines</span></span>&ensp;:&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Data.List1.List1"><span class="name type">List1</span></span>&ensp;<span class="name type">String</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd><dt id="Text.Literate.LiterateError"><code><span class="keyword">record</span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;:&ensp;<span class="name type">Type</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span><br>  <b>Constructor</b>:&ensp;<dl class="decls"><dt id="Text.Literate.MkLitErr"><code><a class="type" href="Text.Literate.html#Text.Literate.MkLitErr"><span class="name constructor">MkLitErr</span></a>&ensp;:&ensp;<span class="name type">Int</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a></code></dt></dl><br>  <b>Projections</b>:<br><dl class="decls">  <dt id="Text.Literate.LiterateError.(.column)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.column)"><span class="name function">.column</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt>  <dt id="Text.Literate.LiterateError.(.input)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.input)"><span class="name function">.input</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span></code></dt>  <dt id="Text.Literate.LiterateError.(.line)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.line)"><span class="name function">.line</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt></dl></dd><dt id="Text.Literate.LiterateError.(.line)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.line)"><span class="name function">.line</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateError.line"><code><span class="type resolved" title="Text.Literate.LiterateError.line"><span class="name function">line</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateError.(.column)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.column)"><span class="name function">.column</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateError.column"><code><span class="type resolved" title="Text.Literate.LiterateError.column"><span class="name function">column</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">Int</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateError.(.input)"><code><span class="type resolved" title="Text.Literate.LiterateError.(.input)"><span class="name function">.input</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateError.input"><code><span class="type resolved" title="Text.Literate.LiterateError.input"><span class="name function">input</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span></code></dt><dd>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle"><code><span class="keyword">record</span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;:&ensp;<span class="name type">Type</span></code></dt><dd><pre>  Description of literate styles.<br>  <br>  A &apos;literate&apos; style comprises of<br>  <br>  + a list of code block deliminators (`deliminators`);<br>  + a list of code line markers (`line_markers`); and<br>  + a list of known file extensions `file_extensions`.<br>  <br>  Some example specifications:<br>  <br>  + Bird Style<br>  <br>  ```<br>  MkLitStyle Nil [&quot;&gt;&quot;] [&quot;.lidr&quot;]<br>  ```<br>  <br>  + Literate Haskell (for LaTeX)<br>  <br>  ```<br>  MkLitStyle [(&quot;\\begin{code}&quot;, &quot;\\end{code}&quot;),(&quot;\\begin{spec}&quot;,&quot;\\end{spec}&quot;)]<br>            Nil<br>            [&quot;.lhs&quot;, &quot;.tex&quot;]<br>  ```<br>  <br>  + OrgMode<br>  <br>  ```<br>  MkLitStyle [(&quot;#+BEGIN_SRC idris&quot;,&quot;#+END_SRC&quot;), (&quot;#+COMMENT idris&quot;,&quot;#+END_COMMENT&quot;)]<br>            [&quot;#+IDRIS:&quot;]<br>            [&quot;.org&quot;]<br>  ```<br>  <br>  + Common Mark<br>  <br>  ```<br>  MkLitStyle [(&quot;```idris&quot;,&quot;```&quot;), (&quot;&lt;!-- idris&quot;,&quot;--!&gt;&quot;)]<br>            Nil<br>            [&quot;.md&quot;, &quot;.markdown&quot;]<br>  ```<br>  </pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span><br>  <b>Constructor</b>:&ensp;<dl class="decls"><dt id="Text.Literate.MkLitStyle"><code><a class="type" href="Text.Literate.html#Text.Literate.MkLitStyle"><span class="name constructor">MkLitStyle</span></a>&ensp;:&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;(<span class="name type">String</span>,&ensp;<span class="name type">String</span>)&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a></code></dt></dl><br>  <b>Projections</b>:<br><dl class="decls">  <dt id="Text.Literate.LiterateStyle.(.deliminators)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.deliminators)"><span class="name function">.deliminators</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;(<span class="name type">String</span>,&ensp;<span class="name type">String</span>)</code></dt><dd><pre>  The pairs of start and end tags for code blocks.</pre></dd>  <dt id="Text.Literate.LiterateStyle.(.file_extensions)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.file_extensions)"><span class="name function">.file_extensions</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Recognised file extensions. Not used by the module, but will be<br>  of use when connecting to code that reads in the original source<br>  files.</pre></dd>  <dt id="Text.Literate.LiterateStyle.(.line_markers)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.line_markers)"><span class="name function">.line_markers</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Line markers that indicate a line contains code.</pre></dd></dl></dd><dt id="Text.Literate.LiterateStyle.(.deliminators)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.deliminators)"><span class="name function">.deliminators</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;(<span class="name type">String</span>,&ensp;<span class="name type">String</span>)</code></dt><dd><pre>  The pairs of start and end tags for code blocks.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle.deliminators"><code><span class="type resolved" title="Text.Literate.LiterateStyle.deliminators"><span class="name function">deliminators</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;(<span class="name type">String</span>,&ensp;<span class="name type">String</span>)</code></dt><dd><pre>  The pairs of start and end tags for code blocks.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle.(.line_markers)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.line_markers)"><span class="name function">.line_markers</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Line markers that indicate a line contains code.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle.line_markers"><code><span class="type resolved" title="Text.Literate.LiterateStyle.line_markers"><span class="name function">line_markers</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Line markers that indicate a line contains code.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle.(.file_extensions)"><code><span class="type resolved" title="Text.Literate.LiterateStyle.(.file_extensions)"><span class="name function">.file_extensions</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Recognised file extensions. Not used by the module, but will be<br>  of use when connecting to code that reads in the original source<br>  files.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.LiterateStyle.file_extensions"><code><span class="type resolved" title="Text.Literate.LiterateStyle.file_extensions"><span class="name function">file_extensions</span></span>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Basics.List"><span class="name type">List</span></span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Recognised file extensions. Not used by the module, but will be<br>  of use when connecting to code that reads in the original source<br>  files.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">public&ensp;export</span></dd><dt id="Text.Literate.extractCode"><code><a class="type" href="Text.Literate.html#Text.Literate.extractCode"><span class="name function">extractCode</span></a>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Types.Either"><span class="name type">Either</span></span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Given a &apos;literate specification&apos; extract the code from the<br>  literate source file (`litStr`) that follows the presented style.<br>  <br>  @specification The literate specification to use.<br>  @litStr  The literate source file.<br>  <br>  Returns a `LiterateError` if the literate file contains malformed<br>  code blocks or code lines.<br>  </pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd><dt id="Text.Literate.unlit"><code><a class="type" href="Text.Literate.html#Text.Literate.unlit"><span class="name function">unlit</span></a>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="type resolved" title="Prelude.Types.Either"><span class="name type">Either</span></span>&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateError"><span class="name type">LiterateError</span></a>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Synonym for `extractCode`.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd><dt id="Text.Literate.isLiterateLine"><code><a class="type" href="Text.Literate.html#Text.Literate.isLiterateLine"><span class="name function">isLiterateLine</span></a>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;(<span class="type resolved" title="Prelude.Types.Maybe"><span class="name type">Maybe</span></span>&ensp;<span class="name type">String</span>,&ensp;<span class="name type">String</span>)</code></dt><dd><pre>  Is the provided line marked up using a line marker?<br>  <br>  If the line is suffixed by any one of the style&apos;s set of line<br>  markers then return length of literate line marker, and the code stripped from the line<br>  marker. Otherwise, return Nothing and the unmarked line.</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd><dt id="Text.Literate.embedCode"><code><a class="type" href="Text.Literate.html#Text.Literate.embedCode"><span class="name function">embedCode</span></a>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Given a &apos;literate specification&apos; embed the given code using the<br>  literate style provided.<br>  <br>  If the style uses deliminators to denote code blocks use the first<br>  pair of deliminators in the style. Otherwise use first linemarker<br>  in the style. If there is **no style** return the presented code<br>  string unembedded.<br>  <br>  <br>  @specification The literate specification to use.<br>  @code  The code to embed,<br>  <br>  </pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd><dt id="Text.Literate.relit"><code><a class="type" href="Text.Literate.html#Text.Literate.relit"><span class="name function">relit</span></a>&ensp;:&ensp;<a class="type" href="Text.Literate.html#Text.Literate.LiterateStyle"><span class="name type">LiterateStyle</span></a>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span>&ensp;<span class="keyword">-&gt;</span>&ensp;<span class="name type">String</span></code></dt><dd><pre>  Synonym for `embedCode`</pre><br>  <b>Totality</b>:&ensp;<span class="keyword">total</span><br>  <b>Visibility</b>:&ensp;<span class="keyword">export</span></dd></dl></div><footer>Produced by Idris 2 version 0.7.0-73bb183cc</footer></body></html>